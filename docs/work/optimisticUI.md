---
toc: content
---

# 乐观 UI

## 什么是乐观 UI？

乐观 UI 是一种你可以使用它来模拟突变结果模式，你甚至可以在服务器接收响应之前更新 UI。一旦从服务器接收到响应，乐观结果将被丢弃并替换为实际结果。
也可以说是一种 UI 设计方式,它在用户执行操作后,不用等待服务器响应, 立即更新 UI。 如果操作失败, 则回滚 UI 到之前的状态。

## 为什么要使用乐观 UI ？

- 讨厌等待
- 更好的用户体验
  及时反馈
- 吸引用户，维持用户的注意力
  页面操作流畅，提供积极的反馈
- 用户无感知
  跳过后端处理逻辑的时间，UI 立即更新

## 悲观的一面

- 是一种黑魔法 / 作弊手段
  对用户撒谎，编造他们操作的结果
- 如果用户获得成功的反馈，但是在服务器响应之前就关闭了浏览器标签页，怎么办？

## 经验法则

如果你想使用乐观 UI，那么你需要确认以下内容：

- 依靠的 API 足够稳定，能够返回可预期的结果（重要）。
- 了解 API 的响应时间。（重要）
- 界面要在向服务器发送请求之前，找出可能的错误和问题。最好能够完全去除可能会导致 API 返回错误的因素。
  UI 元素越简单，越适合运用乐观 UI。
- 在简单的是非选项上运用乐观派模式。
  例如：只有成功与失败两种响应状态的元素。
- 乐观派 UI 不仅仅适用于点击按钮。也可以运用于页面中的各种不同交互，包括页面的加载。
  例如：框架页面就运用了相同的观念：你预期服务器能成功返回信息，所以直接向用户先展示占位符。

## 实战运用

如下场景中，优先考虑运用乐观 UI

- 点赞评论以及收藏
- 拖拽排序
